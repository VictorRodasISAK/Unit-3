<CustButton@Button>:
    font_size: 32




<CalcGridLayout>:
    id: calculator
    display: entry
    rows: 6
    padding: 1
    spacing: 1


    BoxLayout:
        TextInput:
            id: entry
            font_size: 32
            color: "white"
            halign: 'right'
            multiline: False
            background_color: 0.6,0.6,0.6,1
            foreground_color: 1,1,1,1
    BoxLayout:
        spacing: 1
        CustButton:
            text: "C"
            on_press: entry.text = ""
            background_color: "grey"
        CustButton:
            text: "±"
            on_press: entry.text = str(float(entry.text) * -1) if entry.text else ""
            background_color: "grey"
        CustButton:
            text: "%"
            on_press: entry.text = str(float(entry.text) / 100) if entry.text else ""
            background_color: "grey"
        CustButton:
            text: "÷"
            on_press: entry.text += "/" if entry.text and entry.text[-1] != "/" else ""
            background_color: "orange"
    BoxLayout:
        spacing: 1
        CustButton:
            text: "7"
            on_press: entry.text += self.text
        CustButton:
            text: "8"
            on_press: entry.text += self.text
        CustButton:
            text: "9"
            on_press: entry.text += self.text
        CustButton:
            text: "×"
            on_press: entry.text += "*" if entry.text and entry.text[-1] != "*" else ""
            background_color: "orange"

    BoxLayout:
        spacing: 1
        CustButton:
            text: "4"
            on_press: entry.text += self.text
        CustButton:
            text: "5"
            on_press: entry.text += self.text
        CustButton:
            text: "6"
            on_press: entry.text += self.text
        CustButton:
            text: "—"
            on_press: entry.text += "-" if entry.text and entry.text[-1] != "-" else ""
            background_color: "orange"

    BoxLayout:
        spacing: 1
        CustButton:
            text: "1"
            on_press: entry.text += self.text
        CustButton:
            text: "2"
            on_press: entry.text += self.text
        CustButton:
            text: "3"
            on_press: entry.text += self.text
        CustButton:
            text: "+"
            on_press: entry.text += "+" if entry.text and entry.text[-1] != "+" else ""
            background_color: "orange"

    BoxLayout:
        spacing: 1
        CustButton:
            text: "0"
            on_press: entry.text += self.text
            size_hint_x: 2
        CustButton:
            text: ","
            on_press: entry.text += "." if entry.text and entry.text[-1] != "." else ""
        CustButton:
            text: "="
            on_press: calculator.calculate(entry.text)
            background_color: "orange"